!function(){"use strict";function e(e,t,o){if(void 0===e||"string"!=typeof e)throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===o||"string"!=typeof o)throw 400;u=e,f=t,w=o}function t(e,t){function n(){function n(e){function n(e){e||(i.style.display="none",t())}e.preventDefault();var a=i.querySelector("#ds_base_login__username").value,r=i.querySelector("#ds_base_login__password").value;a&&r&&o(a,r,n)}var i=document.createElement("form");i.id="ds_base_login",i.innerHTML=['<input id="ds_base_login__username" type="text" placeholder="Username">','<input id="ds_base_login__password" type="password" placeholder="Password">','<button type="submit">Login</button>'].join("\n"),i.addEventListener("submit",n),e.appendChild(i)}if(void 0===e||"object"!=typeof e)throw 400;if(void 0===t||"function"!=typeof t)throw 400;i()?t():n()}function o(e,t,o){function n(){if(4===r.readyState){if(200===r.status){var e;try{e=JSON.parse(r.responseText).token}catch(t){return o(500)}return e?(window.localStorage.setItem("ds_token",e),o(null)):o(500)}return o(r.status?r.status:500)}}if(void 0===e||"string"!=typeof e)throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=u+":3010/api/login",a="username="+e+"&password="+t,r=new XMLHttpRequest;r.open("POST",i,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=n,r.send(a)}function n(){window.localStorage.removeItem("ds_token"),p()}function i(){return null!==window.localStorage.getItem("ds_token")}function a(e,t){function o(){var e=n.status;if(4===n.readyState)if(200===e)try{t(null,JSON.parse(n.responseText))}catch(o){t(415,null)}else t(e,null)}if(void 0===e||"string"!=typeof e)throw 400;if(void 0===t||"function"!=typeof t)throw 400;var n=new window.XMLHttpRequest;n.onreadystatechange=o,n.open("GET","/"+f+"-"+w+"-upload/"+e,!0),n.send()}function r(e,t,o){function n(){4===d.readyState&&(200!==d.status&&o(500),o())}if(void 0===e||"object"!=typeof e)throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=new window.Blob([window.JSON.stringify(e)],{type:"application/json"}),a=new window.FormData,r=window.localStorage.getItem("ds_token"),d=new window.XMLHttpRequest;a.append("user",f),a.append("repo",w),a.append("file",i,t),d.open("POST",u+":3010/api/upload",!0),d.setRequestHeader("Authorization","bearer "+r),d.onreadystatechange=n,d.send(a)}function d(e,t){function o(){4===a.readyState&&(200!==a.status&&t(500),t())}if(void 0===e||"object"!=typeof e)throw 400;if(void 0===t||"function"!=typeof t)throw 400;var n=new window.FormData,i=window.localStorage.getItem("ds_token"),a=new window.XMLHttpRequest;n.append("user",f),n.append("repo",w),n.append("file",e),a.open("POST",u+":3010/api/upload",!0),a.setRequestHeader("Authorization","bearer "+i),a.onreadystatechange=o,a.send(n)}function s(e,t){function o(){var e=i.statu;4===i.readyState&&(200!==e&&t(e),t())}if(void 0===e||"string"!=typeof e)throw 400;if(void 0===t||"function"!=typeof t)throw 400;var n=window.localStorage.getItem("ds_token"),i=new window.XMLHttpRequest;i.open("POST",u+":3010/api/delete",!0),i.setRequestHeader("Authorization","bearer "+n),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=o,i.send(window.JSON.stringify({user:f,repo:w,filename:"example.pdf"}))}function p(){window.location.reload()}var u,f,w,l={};l.setBase=e,l.addAdminTools=t,l.login=o,l.logout=n,l.authenticated=i,l.downloadObject=a,l.uploadObject=r,l.uploadFile=d,l.remove=s,window.ds=l}();