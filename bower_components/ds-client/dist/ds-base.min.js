!function(){"use strict";function t(t,e,o){if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===o||"string"!=typeof o)throw 400;p=t,f=e,w=o}function e(t,e){function n(){function n(t){function n(t){t||(i.style.display="none",e())}t.preventDefault();var a=i.querySelector("#ds_base_login__username").value,r=i.querySelector("#ds_base_login__password").value;a&&r&&o(a,r,n)}var i=document.createElement("form");i.id="ds_base_login",i.innerHTML=['<input id="ds_base_login__username" type="text" placeholder="Username">','<input id="ds_base_login__password" type="password" placeholder="Password">','<button type="submit">Login</button>'].join("\n"),i.addEventListener("submit",n),t.appendChild(i)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;i()?e():n()}function o(t,e,o){function n(){if(4===r.readyState){if(200!==r.status)return o(r.status?r.status:500);var t;try{t=JSON.parse(r.responseText).token}catch(e){return o(500)}return t?(window.localStorage.setItem("ds_token",t),o(null)):o(500)}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=p+":3010/api/login",a="username="+t+"&password="+e,r=new XMLHttpRequest;r.open("POST",i,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=n,r.send(a)}function n(){window.localStorage.removeItem("ds_token"),u()}function i(){return null!==window.localStorage.getItem("ds_token")}function a(t,e){function o(){if(4===n.readyState){if(200!==n.status)return e(n.status?n.status:500);try{return e(null,JSON.parse(n.responseText))}catch(t){return e(415,null)}}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=new window.XMLHttpRequest;n.onreadystatechange=o,n.open("GET","/upload/"+f+"-"+w+"/"+t,!0),n.send()}function r(t,e,o){function n(){if(4===s.readyState)return o(200!==s.status?s.status?s.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=new window.Blob([window.JSON.stringify(t)],{type:"application/json"}),a=new window.FormData,r=window.localStorage.getItem("ds_token"),s=new window.XMLHttpRequest;a.append("user",f),a.append("repo",w),a.append("file",i,e),s.open("POST",p+":3010/api/upload",!0),s.setRequestHeader("Authorization","bearer "+r),s.onreadystatechange=n,s.send(a)}function s(t,e){function o(){if(4===a.readyState)return e(200!==a.status?a.status?a.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=new window.FormData,i=window.localStorage.getItem("ds_token"),a=new window.XMLHttpRequest;n.append("user",f),n.append("repo",w),n.append("file",t),a.open("POST",p+":3010/api/upload",!0),a.setRequestHeader("Authorization","bearer "+i),a.onreadystatechange=o,a.send(n)}function d(t,e){function o(){if(4===i.readyState)return e(200!==i.status?i.status?i.status:500:null)}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=window.localStorage.getItem("ds_token"),i=new window.XMLHttpRequest;i.open("POST",p+":3010/api/delete",!0),i.setRequestHeader("Authorization","bearer "+n),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=o,i.send(window.JSON.stringify({user:f,repo:w,filename:"example.pdf"}))}function u(){window.location.reload()}var p,f,w,l={};l.setBase=t,l.addAdminTools=e,l.login=o,l.logout=n,l.authenticated=i,l.downloadObject=a,l.uploadObject=r,l.uploadFile=s,l.remove=d,window.ds=l}();